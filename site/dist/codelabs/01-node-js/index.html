
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Day 2 - Introduction to NodeJS and Javascript</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="01-node-js"
                  title="Day 2 - Introduction to NodeJS and Javascript"
                  environment="web"
                  feedback-link="mailto:hakam.abdelqader@ibm.com">
    
      <google-codelab-step label="Introduction" duration="2">
        <p>Background / Summary of the Labs.</p>
<h2 is-upgraded>What you&#39;ll build</h2>
<p>In this session, you&#39;ll build a pure NodeJS chatbot. The completed app will allow a user to put in the name and join into a group chat. You&#39;ll build everything with NodeJs using the native HTTP module. This is the app you&#39;ll be building today</p>
<h2 is-upgraded>Concepts we will cover</h2>
<ul>
<li>JavaScript Overview</li>
<li>JavaScript Object-Oriented Programming</li>
<li>JavaScript Scope</li>
<li>NodeJS</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Agenda" duration="1">
        <h2 is-upgraded>Weeks agenda</h2>
<p class="image-container"><img src="img/1e7d502b3b75826.png"></p>
<p>Codelab: Introduction to NodeJS</p>
<p>This codelab will go through the process of creating a simple NodeJS application. This application will be using a few modules such as <code>fs</code>, <code>express</code>, <code>request</code>, and <code>mustache</code>. We will learn how to initialize a new NodeJS project, install packages, send requests, and serve a simple website with Express and Mustache.</p>
<p>If at any point during this tutorial you&#39;re lost or your code is not working, you can check the final files listed in this repository.</p>


      </google-codelab-step>
    
      <google-codelab-step label="The Setup" duration="0">
        <p>First we need to install NodeJS if it is not already done. Head over to https://nodejs.org and install the latest LTS version.</p>
<p>Once NodeJS installed, create a new folder for our new NodeJS project. Navigate to your new folder in your terminal and execute <code>npm init</code>. You&#39;ll have to choose a title, description and other options for our project. I called my main file <code>index.js</code>.</p>
<p>That&#39;s all for the setup phase, let&#39;s start coding!</p>


      </google-codelab-step>
    
      <google-codelab-step label="Web server with ExpressJS" duration="0">
        <p>Let&#39;s launch a web server using ExpressJS! First, we need to install the <code>express</code> package. To install a package simply execute <code>npm install --save <package-name></code>, in our case, the package name is <code>express</code> so we will enter <code>npm install --save express</code>.</p>
<p>The option <code>--save</code> (or <code>-S</code>) will add the package to the list of dependencies listed in your <code>package.json</code> file. This is particularly interesting if you need to install your project in a new environment and to avoid adding the <code>node_modules</code> folder in your repository which is a <strong>very bad</strong> idea. If you want to reinstall your project with all its dependencies, simply execute <code>npm install</code>.</p>
<p>Now, we&#39;ll need to create our <code>index.js</code> file. This file will be the main file we will be using.</p>
<p>Let&#39;s start by adding our <code>express</code> module to our code.</p>
<pre><code language="language-js" class="language-js">const express = require(&#39;express&#39;)
</code></pre>
<p><em>Note: NodeJS now supports ESNext (ES6+). You can use let/const, async/await, and all the cool features available in new versions of JavaScript.</em></p>
<p>Now, let&#39;s initialize a new web server.</p>
<pre><code language="language-js" class="language-js">const app = express()
</code></pre>
<p>And we can finally launch our web server on the port of our choice. Let&#39;s say <code>3000</code>. We&#39;ll also add an index route to our server.</p>
<pre><code language="language-js" class="language-js">const PORT = 3000

app.get(&#39;/&#39;, (req, res) =&gt; {
    res.send(&#39;Hello GDG Galway!&#39;)
})

app.listen(PORT, () =&gt; {
    console.log(`Server listening on port ${PORT}...`)
})
</code></pre>
<p><em>Note: logs/warnings/errors will be displayed in the terminal used to launch your NodeJS application.</em></p>
<p>That&#39;s it! We&#39;re done. We have a running web server. Let&#39;s run our code by executing <code>node index.js</code>. Yay! The server is running! We can go to http://localhost:3000 and check if our server works.</p>
<p>Let&#39;s create a proper static HTML file to serve. We&#39;ll create a new folder called <code>static</code> and create <code>hello.html</code>. Let&#39;s add some code into it.</p>
<pre><code language="language-html" class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
    &lt;head&gt;
        &lt;meta charset=&#34;UTF-8&#34;&gt;
        &lt;title&gt;Hello!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello GDG Galway!&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>To serve static files, we&#39;ll need to add a simple line to our main file.</p>
<pre><code language="language-js" class="language-js">app.use(express.static(`${__dirname}/static/`))
</code></pre>
<p><em>Note: The global variable </em></p>
<p><em><code>__dirname</code></em></p>
<p><em> is the path to your NodeJS project folder.</em></p>
<p>If we relaunch our application with <code>node index.js</code>, and go to http://localhost:3000/hello.html, we should see the content of our HTML file!</p>


      </google-codelab-step>
    
      <google-codelab-step label="Even fancier stuff with Mustache!" duration="0">
        <p>First, let&#39;s install <code>mustache</code> using <code>npm install --save mustache</code>. We now need to create a template file. We&#39;ll make a quick to-do list, so let&#39;s call it <code>todos.html</code> and place it in a new folder called <code>templates</code>. Mustache will use this file to generate the HTML code necessary to render our todos.</p>
<pre><code language="language-html" class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
    &lt;head&gt;
        &lt;meta charset=&#34;UTF-8&#34;&gt;
        &lt;title&gt;To-Do List&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;To-Do List&lt;/h1&gt;
        &lt;nav&gt;
            &lt;a href=&#34;/todos&#34;&gt;All&lt;/a&gt;
            &lt;a href=&#34;/todos/pending&#34;&gt;Pending&lt;/a&gt;
            &lt;a href=&#34;/todos/completed&#34;&gt;Completed&lt;/a&gt;
        &lt;/nav&gt;
        &#123;&#123;#todos}}
            &lt;div class=&#34;todo&#34;&gt;
                &#123;&#123;#completed}}&lt;input type=&#34;checkbox&#34; checked&gt;&#123;&#123;/completed}}
                &#123;&#123;^completed}}&lt;input type=&#34;checkbox&#34;&gt;&#123;&#123;/completed}}
                &lt;span&gt;&#123;&#123;title}}&lt;/span&gt;
            &lt;/div&gt;
        &#123;&#123;/todos}}
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>We will also need new packages to get our list of todos. Let&#39;s install <code>request</code> and <code>request-promise-native</code>.</p>
<p>We&#39;all ready to code our new route in <code>index.js</code>.</p>
<pre><code language="language-js" class="language-js">const fs = require(&#39;fs&#39;)
const request = require(&#39;request-promise-native&#39;)
const mustache = require(&#39;mustache&#39;)

app.get(&#39;/todos&#39;, async (req, res) =&gt; {
    // Get the content of &#39;todos.html&#39;
    const template = fs.readFileSync(&#39;templates/todos.html&#39;, &#39;UTF-8&#39;)
    // Get our list of todos in JSON format
    const todos = await request(&#39;https://jsonplaceholder.typicode.com/todos?userId=1&#39;, { json: true })
    // Generate the HTML content from our list of todos
    const html = mustache.render(template, { todos })
    // Serve the final content
    res.send(html)
})
</code></pre>
<p>Let&#39;s see the result of our new route by relaunching our app and going to http://localhost:3000/todos. We should see our list of todos.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Dynamic routing" duration="0">
        <p>Let&#39;s change the content of our page depending on the variables passed in our route. We will list our pending tasks and our completed tasks by creating two additional routes.</p>
<pre><code language="language-js" class="language-js">app.get(&#39;/todos/:status&#39;, async (req, res) =&gt; {
    // Get our dynamic status parameter
    const {status} = req.params
    // Is the status we&#39;re looking for Completed or not?
    const completed = status === &#39;completed&#39;
    // Get the content of &#39;todos.html&#39;
    const template = fs.readFileSync(&#39;templates/todos.html&#39;, &#39;UTF-8&#39;)
    // Get our list of todos in JSON format
    const todos = await request(&#39;https://jsonplaceholder.typicode.com/todos?userId=1&#39;, { json: true })
    // Generate the HTML content from our list of filtered todos based on their status
    const html = mustache.render(template, {
        todos: todos.filter(todo =&gt; todo.completed === completed)
    })
    // Serve the final content
    res.send(html)
})
</code></pre>
<p>If we relaunch our app and try to access http://localhost:3000/todos/pending and http://localhost:3000/todos/completed, we should see our list of pending tasks and completed tasks! Awesome stuff :D</p>


      </google-codelab-step>
    
      <google-codelab-step label="Congratulations!" duration="0">
        <p>You have successfully completed this simple tutorial and created your own NodeJS application using Express, Mustache, Request, and FS (file system)!</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
